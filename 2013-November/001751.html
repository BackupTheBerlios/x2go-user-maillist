<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2Go-User] testing session broker in	WSGI/plain/inifile	configuration
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-user/2013-November/index.html" >
   <LINK REL="made" HREF="mailto:x2go-user%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-User%5D%20testing%20session%20broker%20in%0A%09WSGI/plain/inifile%09configuration&In-Reply-To=%3C1383380615.1430.2.camel%40Nokia-N900%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001750.html">
   <LINK REL="Next"  HREF="001752.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2Go-User] testing session broker in	WSGI/plain/inifile	configuration</H1>
    <B>Mike Gabriel</B> 
    <A HREF="mailto:x2go-user%40lists.berlios.de?Subject=Re%3A%20%5BX2Go-User%5D%20testing%20session%20broker%20in%0A%09WSGI/plain/inifile%09configuration&In-Reply-To=%3C1383380615.1430.2.camel%40Nokia-N900%3E"
       TITLE="[X2Go-User] testing session broker in	WSGI/plain/inifile	configuration">mike.gabriel at das-netzwerkteam.de
       </A><BR>
    <I>Sat Nov  2 09:23:35 CET 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="001750.html">[X2Go-User] testing session broker in WSGI/plain/inifile configuration
</A></li>
        <LI>Next message: <A HREF="001752.html">[X2Go-User] testing session broker in	WSGI/plain/inifile	configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1751">[ date ]</a>
              <a href="thread.html#1751">[ thread ]</a>
              <a href="subject.html#1751">[ subject ]</a>
              <a href="author.html#1751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Kermit

----- Original message -----
&gt;<i> OK made a bit of progress.&#160;  I've got the session profile defined in the
</I>&gt;<i> config file, and I'm getting the x2go client to communicate with the
</I>&gt;<i> session broker.&#160;  It seems though, that things are breaking when the
</I>&gt;<i> session broker tries to communicate with the broker agent.
</I>&gt;<i> 
</I>&gt;<i> I get an internal server error console message on the terminal where I'm
</I>&gt;<i> trying to launch x2goclient.&#160;  When I look in the apache logs, I see the
</I>&gt;<i> following error from the virtual host for the wsgi session broker:
</I>&gt;<i> 
</I>&gt;<i> &lt;VirtualHost *:443&gt;
</I>&gt;<i>&#160; &#160; &#160; &#160;  ServerName broker.lanl.gov
</I>&gt;<i> [Fri Nov 01 11:12:51 2013] [notice] Apache/2.2.22 (Ubuntu) configured --
</I>&gt;<i> resuming no[Sat Nov 02 00:48:11 2013] [error]
</I>&gt;<i> ***************************************************************************
</I>&gt;<i> [Sat Nov 02 00:48:11 2013] [error] [Sat Nov 02 00:48:11 2013] [error]
</I>&gt;<i> [Sat Nov 02 00:48:11 2013] [error] Authentication (publickey)
</I>&gt;<i> successful! [Sat Nov 02 00:48:11 2013] [error] [chan 1] Max packet in:
</I>&gt;<i> 34816 bytes [Sat Nov 02 00:48:11 2013] [error] [chan 1] Max packet out:
</I>&gt;<i> 32768 bytes [Sat Nov 02 00:48:11 2013] [error] Secsh channel 1 opened.
</I>&gt;<i> [Sat Nov 02 00:48:11 2013] [error] [chan 1] Sesch channel 1 request ok
</I>&gt;<i> [Sat Nov 02 00:48:11 2013] [error] [chan 1] EOF received (1) [Sat Nov 02
</I>&gt;<i> 00:48:11 2013] [error] Uncaught exception POST /plain/inifile
</I>&gt;<i> (xxx.xxx.xxx.xxx) [Sat Nov 02 00:48:11 2013] [error]
</I>&gt;<i> &lt;tornado.wsgi.HTTPRequest object at 0x7fc8c0927dd0&gt; [Sat Nov 02 00:48:11
</I>&gt;<i> 2013] [error] Traceback (most recent call last): [Sat Nov 02 00:48:11
</I>&gt;<i> 2013] [error]&#160; &#160;  File &quot;/usr/lib/python2.7/dist-packages/tornado/web.py&quot;,
</I>&gt;<i> line 954, in _execute [Sat Nov 02 00:48:11 2013] [error]&#160; &#160; &#160;  
</I>&gt;<i> getattr(self, self.request.method.lower())(*args, **kwargs) [Sat Nov 02
</I>&gt;<i> 00:48:11 2013] [error]&#160; &#160;  File
</I>&gt;<i> &quot;/usr/lib/python2.7/dist-packages/x2gobroker/web/plain.py&quot;, line 136, in
</I>&gt;<i> post [Sat Nov 02 00:48:11 2013] [error]&#160; &#160; &#160; &#160;  profiles =
</I>&gt;<i> broker_backend.list_profiles(username) [Sat Nov 02 00:48:11 2013]
</I>&gt;<i> [error]&#160; &#160;  File
</I>&gt;<i> &quot;/usr/lib/python2.7/dist-packages/x2gobroker/brokers/base_broker.py&quot;,
</I>&gt;<i> line 862, in list_profiles [Sat Nov 02 00:48:11 2013] [error]&#160; &#160; &#160;  
</I>&gt;<i> running_sessions, suspended_sessions =
</I>&gt;<i> x2gobroker.agent.has_sessions(username, query_mode=agent_query_mode,
</I>&gt;<i> remote_agent=remote_agent) [Sat Nov 02 00:48:11 2013] [error]&#160; &#160;  File
</I>&gt;<i> &quot;/usr/lib/python2.7/dist-packages/x2gobroker/agent.py&quot;, line 230, in
</I>&gt;<i> has_sessions [Sat Nov 02 00:48:11 2013] [error]&#160; &#160; &#160; &#160;  return ([
</I>&gt;<i> s.split('|')[3] for s in _session_list if s.split('|')[4] == 'R' ], [
</I>&gt;<i> s.split('|')[3] for s in _session_list if s.split('|')[4] == 'S' ]) [Sat
</I>&gt;<i> Nov 02 00:48:11 2013] [error] TypeError: 'NoneType' object is not
</I>&gt;<i> iterable
</I>&gt;<i> 
</I>&gt;<i> Do I have to actually modify something in the broker agent's
</I>&gt;<i> configuration?&#160;  What might I have done wrong in a configuration file on
</I>&gt;<i> the session broker server?
</I>&gt;<i> 
</I>&gt;<i> Thanks!!!
</I>&gt;<i> -Kermit
</I>
I really have to release 0.0.3.0 which is currently in x2gobroker.git master branch and in our nightly builds.

Please use that version (which still is a development snapshot and a preview, but in terms of the agent more robust).

Mike




-- 

DAS-NETZWERKTEAM
mike gabriel, herweg 7, 24357 fleckeby
fon: +49 (1520) 1976148

GnuPG Key ID 0x25771B13
mail: <A HREF="https://lists.berlios.de/mailman/listinfo/x2go-user">mike.gabriel at das-netzwerkteam.de</A>, <A HREF="http://das-netzwerkteam.de">http://das-netzwerkteam.de</A>



</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001750.html">[X2Go-User] testing session broker in WSGI/plain/inifile configuration
</A></li>
	<LI>Next message: <A HREF="001752.html">[X2Go-User] testing session broker in	WSGI/plain/inifile	configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1751">[ date ]</a>
              <a href="thread.html#1751">[ thread ]</a>
              <a href="subject.html#1751">[ subject ]</a>
              <a href="author.html#1751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-user">More information about the X2Go-User
mailing list</a><br>
</body></html>
