<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [X2go-User] Printing Security
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/x2go-user/2012-January/index.html" >
   <LINK REL="made" HREF="mailto:x2go-user%40lists.berlios.de?Subject=Re%3A%20%5BX2go-User%5D%20Printing%20Security&In-Reply-To=%3C20120125084548.13306vfomgtu1rfw%40mail.das-netzwerkteam.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000559.html">
   <LINK REL="Next"  HREF="000560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[X2go-User] Printing Security</H1>
    <B>Mike Gabriel</B> 
    <A HREF="mailto:x2go-user%40lists.berlios.de?Subject=Re%3A%20%5BX2go-User%5D%20Printing%20Security&In-Reply-To=%3C20120125084548.13306vfomgtu1rfw%40mail.das-netzwerkteam.de%3E"
       TITLE="[X2go-User] Printing Security">mike.gabriel at das-netzwerkteam.de
       </A><BR>
    <I>Wed Jan 25 08:45:48 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000559.html">[X2go-User] Printing Security
</A></li>
        <LI>Next message: <A HREF="000560.html">[X2go-User] x2go Plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#562">[ date ]</a>
              <a href="thread.html#562">[ thread ]</a>
              <a href="subject.html#562">[ subject ]</a>
              <a href="author.html#562">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On Di 24 Jan 2012 21:26:54 CET  wrote:

&gt;<i> Hi All -
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There is a post on the new site re printing security (see below).   
</I>&gt;<i> Does anyone have experience with Possible Solution 1?  We're hoping  
</I>&gt;<i> to get a few more pointers, maybe some extra documentation, some  
</I>&gt;<i> &quot;here's how you avoid these pitfalls&quot;.  Thanks!
</I>
nothing of the below has been implemented yet. I will comment on some  
of the ideas.

&gt;<i> X2goServer == CUPS Server, latest implementation (as of 20110909):
</I>&gt;<i>
</I>&gt;<i> [...]
</I>&gt;<i>
</I>&gt;<i> using X2go printing locally (X2go server == CUPS server) then  
</I>&gt;<i> security (sudo) is not an issue any more(?)
</I>&gt;<i>
</I>&gt;<i> Nope still is (not a big one, though): Using CUPS the user can  
</I>&gt;<i> easily be faked, allowing to fill someone else's quota or print at  
</I>&gt;<i> their home printer.
</I>
Ok, good point.

&gt;<i> Possible solution 1
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Start a local cups-server for every user
</I>&gt;<i>
</I>&gt;<i> Server listens on a File-socket owned by the user
</I>&gt;<i>
</I>&gt;<i> Add a PDF-Printer to that server (as the cups-user runs as that  
</I>&gt;<i> user, there should be no issues with file permissions)
</I>&gt;<i>
</I>&gt;<i> Import printers from global server
</I>&gt;<i>
</I>&gt;<i> + Secure solution, as no other user is involved
</I>&gt;<i>
</I>&gt;<i> - Every user needs an extra instance (The extra memory usage should  
</I>&gt;<i> not be too much)
</I>
This has been discussed on the mailing list and the consensus was to  
stay away from CUPS instances on a user basis. However, if someone  
starts on implementing I will be happy to review and support coding.

&gt;<i> Possible solution 2
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Write a simple C-Program 'x2goprinter' that is run as the user who  
</I>&gt;<i> wants to print unsing the s-Bit
</I>&gt;<i>
</I>&gt;<i> The Program writes stdin to argv[1] in the printing-directory
</I>&gt;<i>
</I>&gt;<i> It also checks whether the user is x2goprint or root
</I>&gt;<i>
</I>&gt;<i> + Can be easily adopted
</I>&gt;<i>
</I>&gt;<i> - x2goprint must be installed by the client
</I>&gt;<i>
</I>&gt;<i> - s-bit &#8594; Needs security checks
</I>
I have already spent a couple of hours on a possible setuid/setgid-bit  
solution. At the end I came to the conclusion that s-bit approaches do  
not work with the current print file transfer workflow. Maybe I was  
brain-blocked here, so if someone comes up with a proof of concept I  
would love to support a moval away from sudo here.

Greets,
Mike


-- 

DAS-NETZWERKTEAM
mike gabriel, dorfstr. 27, 24245 barmissen
fon: +49 (4302) 281418, fax: +49 (4302) 281419

GnuPG Key ID 0xB588399B
mail: <A HREF="https://lists.berlios.de/mailman/listinfo/x2go-user">mike.gabriel at das-netzwerkteam.de</A>, <A HREF="http://das-netzwerkteam.de">http://das-netzwerkteam.de</A>

freeBusy:
<A HREF="https://mail.das-netzwerkteam.de/freebusy/m.gabriel%40das-netzwerkteam.de.xfb">https://mail.das-netzwerkteam.de/freebusy/m.gabriel%40das-netzwerkteam.de.xfb</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 490 bytes
Desc: Digitale PGP-Unterschrift
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/x2go-user/attachments/20120125/222c9f7a/attachment.pgp">https://lists.berlios.de/pipermail/x2go-user/attachments/20120125/222c9f7a/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000559.html">[X2go-User] Printing Security
</A></li>
	<LI>Next message: <A HREF="000560.html">[X2go-User] x2go Plugin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#562">[ date ]</a>
              <a href="thread.html#562">[ thread ]</a>
              <a href="subject.html#562">[ subject ]</a>
              <a href="author.html#562">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/x2go-user">More information about the X2Go-User
mailing list</a><br>
</body></html>
